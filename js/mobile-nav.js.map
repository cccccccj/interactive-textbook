{"version":3,"sources":["mobile-nav.js"],"names":["sectionSelectors","mobileNav","window","onload","d3","select","on","classList","toggle","cyoa","handleNodeChange","node","empty","updateNavItems","event","detail","navData","selector","section","classed","title","attr","push","navItems","selectAll","data","text","d","handleNavClick","enter","append","exit","remove","activeItem","setSectionState","navSelection","active","datum","i","navNodes"],"mappings":";;AAAA,IAAMA,mBAAmB,CACrB,2BADqB,EAErB,4BAFqB,EAGrB,qBAHqB,CAAzB;;AAMA,IAAIC,kBAAJ;;AAEAC,OAAOC,MAAP,GAAgB,YAAM;AAClBF,gBAAYG,GAAGC,MAAH,CAAU,aAAV,CAAZ;;AAEAD,OAAGC,MAAH,CAAU,cAAV,EAA0BC,EAA1B,CAA6B,OAA7B,EAAsC,YAAW;AAC7C,aAAKC,SAAL,CAAeC,MAAf,CAAsB,QAAtB;AACH,KAFD;;AAIA,QAAIC,OAAOL,GAAGC,MAAH,CAAU,WAAV,EACNC,EADM,CACH,aADG,EACYI,gBADZ,CAAX;;AAGA,QAAIC,OAAOF,KAAKJ,MAAL,CAAY,WAAZ,CAAX;AACA,QAAI,CAACM,KAAKC,KAAL,EAAL,EAAmB;AACfC,uBAAeF,IAAf;AACH;AACJ,CAdD;;AAgBA,SAASD,gBAAT,GAA4B;AACxB,QAAIC,OAAOP,GAAGC,MAAH,CAAUD,GAAGU,KAAH,CAASC,MAAT,CAAgBJ,IAA1B,CAAX;AACAE,mBAAeF,IAAf;AACH;;AAED,SAASE,cAAT,CAAwBF,IAAxB,EAA8B;AAC1B,QAAIK,UAAU,EAAd;;AAD0B;AAAA;AAAA;;AAAA;AAG1B,6BAAqBhB,gBAArB,8HAAuC;AAAA,gBAA9BiB,QAA8B;;AACnC,gBAAIC,UAAUP,KAAKN,MAAL,CAAYY,QAAZ,EACTE,OADS,CACD,QADC,EACS,KADT,CAAd;AAEA,gBAAIC,QAAQF,QAAQG,IAAR,CAAa,YAAb,CAAZ;AACAL,oBAAQM,IAAR,CAAa,EAACJ,gBAAD,EAAUE,YAAV,EAAb;AACH;AARyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAU1B,QAAIG,WAAWtB,UACVuB,SADU,CACA,IADA,EAEVC,IAFU,CAELT,OAFK,CAAf;;AAIAO,aACKG,IADL,CACU,UAACC,CAAD;AAAA,eAAOA,EAAEP,KAAT;AAAA,KADV,EAEKd,EAFL,CAEQ,OAFR,EAEiBsB,cAFjB;;AAIAL,aACKM,KADL,GAEKC,MAFL,CAEY,IAFZ,EAGSX,OAHT,CAGiB,cAHjB,EAGiC,IAHjC,EAISO,IAJT,CAIc,UAACC,CAAD;AAAA,eAAOA,EAAEP,KAAT;AAAA,KAJd,EAKSd,EALT,CAKY,OALZ,EAKqBsB,cALrB;;AAOAL,aAASQ,IAAT,GAAgBC,MAAhB;;AAEA,QAAIC,aAAahC,UAAUI,MAAV,CAAiB,WAAjB,CAAjB;AACA4B,iBAAaA,WAAWrB,KAAX,KAAqBX,UAAUI,MAAV,CAAiB,IAAjB,CAArB,GAA8C4B,UAA3D;;AAEAC,oBAAgBD,UAAhB;AACH;;AAED,SAASC,eAAT,CAAyBC,YAAzB,EAAsD;AAAA,QAAfC,MAAe,uEAAN,IAAM;;AAClDD,iBACShB,OADT,CACiB,QADjB,EAC2BiB,MAD3B,EAEKC,KAFL,GAEanB,OAFb,CAGSC,OAHT,CAGiB,QAHjB,EAG2BiB,MAH3B;AAIH;;AAED,SAASR,cAAT,CAAwBS,KAAxB,EAA+BC,CAA/B,EAAkCC,QAAlC,EAA4C;AAAA;AAAA;AAAA;;AAAA;AACxC,8BAAiBA,QAAjB,mIAA2B;AAAA,gBAAlB5B,IAAkB;;AACvBuB,4BAAgB9B,GAAGC,MAAH,CAAUM,IAAV,CAAhB,EAAiCA,SAAS,IAA1C;AACH;AAHuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAI3C","file":"mobile-nav.js","sourcesContent":["const sectionSelectors = [\n    '.interactive-column--text',\n    '.interactive-column--media',\n    '.interactive-bottom'\n];\n\nlet mobileNav;\n\nwindow.onload = () => {\n    mobileNav = d3.select('#mobile-nav');\n    \n    d3.select('#mobile-menu').on('click', function() {\n        this.classList.toggle('active');\n    });\n    \n    let cyoa = d3.select('inkd-cyoa')\n        .on('node-change', handleNodeChange);\n\n    let node = cyoa.select('inkd-node');\n    if (!node.empty()) {\n        updateNavItems(node);\n    }\n}\n\nfunction handleNodeChange() {\n    let node = d3.select(d3.event.detail.node);\n    updateNavItems(node);\n}\n\nfunction updateNavItems(node) {\n    let navData = [];\n    \n    for (let selector of sectionSelectors) {\n        let section = node.select(selector)\n            .classed('active', false);\n        let title = section.attr('data-title');\n        navData.push({section, title});\n    }\n    \n    let navItems = mobileNav\n        .selectAll('li')\n        .data(navData);\n    \n    navItems\n        .text((d) => d.title)\n        .on('click', handleNavClick);\n    \n    navItems\n        .enter()\n        .append('li')\n            .classed('navbar__item', true)\n            .text((d) => d.title)\n            .on('click', handleNavClick);\n    \n    navItems.exit().remove();\n        \n    let activeItem = mobileNav.select('li.active');\n    activeItem = activeItem.empty() ? mobileNav.select('li') : activeItem;\n    \n    setSectionState(activeItem);\n}\n\nfunction setSectionState(navSelection, active = true) {\n    navSelection\n            .classed('active', active)\n        .datum().section\n            .classed('active', active);\n}\n\nfunction handleNavClick(datum, i, navNodes) {\n    for (let node of navNodes) {\n        setSectionState(d3.select(node), node === this);\n    }\n}"]}