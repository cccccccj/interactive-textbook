{"version":3,"sources":["section-divider.js"],"names":["dividerData","selector","direction","paneSelectors","minFactor","dragBehavior","d3","drag","on","handleDragStart","handleDrag","handleDragEnd","HTMLImports","whenReady","data","dividerElements","Polymer","dom","document","querySelectorAll","selectAll","datum","call","divider","select","parentElement","node","parentNode","total","coord","property","offsetHeight","offsetWidth","factor","Math","max","min","event","parent","style"],"mappings":";;AAAA,IAAMA,cAAc,CAChB;AACIC,cAAU,qBADd;AAEIC,eAAW,YAFf;AAGIC,mBAAe,CAAC,wBAAD,EAA2B,qBAA3B,CAHnB;AAIIC,eAAW;AAJf,CADgB,EAOhB;AACIH,cAAU,mBADd;AAEIC,eAAW,UAFf;AAGIC,mBAAe,CAAC,2BAAD,EAA8B,4BAA9B,CAHnB;AAIIC,eAAW;AAJf,CAPgB,CAApB;;AAeA,IAAIC,eAAeC,GAAGC,IAAH,GACdC,EADc,CACX,OADW,EACFC,eADE,EAEdD,EAFc,CAEX,MAFW,EAEHE,UAFG,EAGdF,EAHc,CAGX,KAHW,EAGJG,aAHI,CAAnB;;AAMAC,YAAYC,SAAZ,CAAsB,YAAM;AAAA;AAAA;AAAA;;AAAA;AACxB,6BAAiBb,WAAjB,8HAA8B;AAAA,gBAArBc,IAAqB;;AAC1B,gBAAIC,kBAAkBC,QAAQC,GAAR,CAAYC,QAAZ,EAAsBC,gBAAtB,CAAuCL,KAAKb,QAA5C,CAAtB;AACAK,eAAGc,SAAH,CAAaL,eAAb,EACKM,KADL,CACWP,IADX,EAEKQ,IAFL,CAEUjB,YAFV;AAGH;AANuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAO3B,CAPD;;AASA,SAASK,UAAT,GAAsB;AAClB,QAAIa,UAAUjB,GAAGkB,MAAH,CAAU,IAAV,CAAd;AACA,QAAIV,OAAOS,QAAQF,KAAR,EAAX;AACA,QAAII,gBAAgBF,QAAQG,IAAR,GAAeC,UAAnC;;AAEA,QAAIC,cAAJ;AAAA,QAAWC,cAAX;AAAA,QAAkBC,iBAAlB;AACA,QAAIhB,KAAKZ,SAAL,KAAmB,YAAvB,EAAqC;AACjC0B,gBAAQH,cAAcM,YAAd,GAA6B,KAAKA,YAA1C;AACAF,gBAAQ,GAAR;AACAC,mBAAW,QAAX;AACH,KAJD,MAIO;AACHF,gBAAQH,cAAcO,WAAd,GAA4B,KAAKA,WAAzC;AACAH,gBAAQ,GAAR;AACAC,mBAAW,OAAX;AACH;;AAED,QAAIG,SAASC,KAAKC,GAAL,CAASD,KAAKE,GAAL,CAAS9B,GAAG+B,KAAH,CAASR,KAAT,IAAkBD,KAA3B,EAAkC,IAAId,KAAKV,SAA3C,CAAT,EAAgEU,KAAKV,SAArE,CAAb;AACA,QAAIkC,SAAShC,GAAGkB,MAAH,CAAUC,aAAV,CAAb;;AAEAa,WAAOd,MAAP,CAAcV,KAAKX,aAAL,CAAmB,CAAnB,CAAd,EACSoC,KADT,CACeT,QADf,EAC4BG,SAAS,GADrC;;AAGAK,WAAOd,MAAP,CAAcV,KAAKX,aAAL,CAAmB,CAAnB,CAAd,EACSoC,KADT,CACeT,QADf,EAC4B,CAAC,IAAIG,MAAL,IAAe,GAD3C;AAEH;;AAGD,SAASxB,eAAT,GAA2B;AACvBH,OAAGc,SAAH,CAAa,QAAb,EACKmB,KADL,CACW,gBADX,EAC6B,MAD7B;AAEH;;AAED,SAAS5B,aAAT,GAAyB;AACrBL,OAAGc,SAAH,CAAa,QAAb,EACKmB,KADL,CACW,gBADX,EAC6B,MAD7B;AAEH","file":"section-divider.js","sourcesContent":["const dividerData = [\n    {\n        selector: '.horizontal-divider',\n        direction: 'horizontal', \n        paneSelectors: ['.interactive-container', '.interactive-bottom'], \n        minFactor: 0.2\n    },\n    {\n        selector: '.vertical-divider',\n        direction: 'vertical', \n        paneSelectors: ['.interactive-column--text', '.interactive-column--media'], \n        minFactor: 0.2\n    }\n];\n\nlet dragBehavior = d3.drag()\n    .on('start', handleDragStart)\n    .on('drag', handleDrag)\n    .on('end', handleDragEnd);\n\n// To make sure that 'Polymer.dom' is available\nHTMLImports.whenReady(() => {\n    for (let data of dividerData) {\n        let dividerElements = Polymer.dom(document).querySelectorAll(data.selector);\n        d3.selectAll(dividerElements)\n            .datum(data)\n            .call(dragBehavior);\n    }\n});\n\nfunction handleDrag() {\n    let divider = d3.select(this);\n    let data = divider.datum();\n    let parentElement = divider.node().parentNode;\n    \n    let total, coord, property;\n    if (data.direction === 'horizontal') {\n        total = parentElement.offsetHeight - this.offsetHeight;\n        coord = 'y';\n        property = 'height';\n    } else {\n        total = parentElement.offsetWidth - this.offsetWidth;\n        coord = 'x';\n        property = 'width';\n    }\n    \n    let factor = Math.max(Math.min(d3.event[coord] / total, 1 - data.minFactor), data.minFactor);\n    let parent = d3.select(parentElement);\n\n    parent.select(data.paneSelectors[0])\n            .style(property, `${factor * 100}%`)\n    \n    parent.select(data.paneSelectors[1])\n            .style(property, `${(1 - factor) * 100}%`)    \n}\n\n// Fix for 'mouseup' event being called over iframes\nfunction handleDragStart() {\n    d3.selectAll('iframe')\n        .style('pointer-events', 'none');\n}\n\nfunction handleDragEnd() {    \n    d3.selectAll('iframe')\n        .style('pointer-events', 'auto');\n}"]}